

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Simulation &mdash; MAVProxy 1.5.7 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="MAVProxy 1.5.7 documentation" href="../index.html"/>
        <link rel="up" title="Analysis and Simulation" href="index.html"/>
        <link rel="next" title="MAVExplorer" href="mavexp.html"/>
        <link rel="prev" title="Offline Tools" href="mavtools.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../index.html" class="icon icon-home"> MAVProxy
        

        
        </a>

        
          
          
            <div class="version">
              1.5.7
            </div>
          
        

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uav_configuration/index.html">UAV Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/index.html">Modules</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Analysis and Simulation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="playback.html">Playback</a></li>
<li class="toctree-l2"><a class="reference internal" href="mavtools.html">Offline Tools</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Simulation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#linux-sitl">Linux - SITL</a></li>
<li class="toctree-l3"><a class="reference internal" href="#linux-hil">Linux - HIL</a></li>
<li class="toctree-l3"><a class="reference internal" href="#caveats">Caveats</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mavexp.html">MAVExplorer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cuav_module/index.html">Image Processing with cuav</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">MAVProxy</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Analysis and Simulation</a> &raquo;</li>
      
    <li>Simulation</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="simulation">
<h1>Simulation<a class="headerlink" href="#simulation" title="Permalink to this headline">¶</a></h1>
<p>MAVProxy can be used in conjunction with the APM source code to create a
simulation environment. There are two types of simulation environments:</p>
<ul class="simple">
<li>Hardware In the Loop (HIL) - The APM code is loaded onto a physical
board and a simulator on a connected PC provides sensor inputs.</li>
<li>Software In The Loop (SITL) - The APM code is built and run on a PC.
A simulator provides sensor inputs.</li>
</ul>
<p>Arduplane uses JSBSim for the simulator in both cases. Rover and Copter use basic Python scripts for simulation.</p>
<div class="section" id="linux-sitl">
<h2>Linux - SITL<a class="headerlink" href="#linux-sitl" title="Permalink to this headline">¶</a></h2>
<p>Download the <a class="reference external" href="https://github.com/diydrones/ardupilot">APM source
code</a> and the
<a class="reference external" href="https://github.com/tridge/jsbsim">jsbsim</a> simulator. Depending on
your system setup, other packages may be required</p>
<p>A full guide for setting up the environment is at the <a class="reference external" href="http://ardupilot.org/dev/docs/setting-up-sitl-on-linux.html">APM
Wiki</a>.</p>
<p>Some useful command line options are:</p>
<ul class="simple">
<li>-v VEHICLE vehicle type (ArduPlane, ArduCopter or APMrover2)</li>
<li>-L select start location from Tools/autotest/locations.txt</li>
<li>-w wipe EEPROM and reload parameters</li>
<li>-j NUM_PROC number of processors to use during build (default 1)</li>
<li>-c do a make clean before building</li>
<li>-G Use GDB for debugging</li>
</ul>
<p>Any arguments to be sent to MAVProxy can simply be specified at the end
of the command:</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">./</span><span class="n">Ardupilot</span><span class="o">/</span><span class="n">Tools</span><span class="o">/</span><span class="n">autotest</span>
<span class="n">sim_vehicle</span><span class="o">.</span><span class="n">sh</span> <span class="o">-</span><span class="n">v</span> <span class="n">Arduplane</span> <span class="o">-</span><span class="n">j</span> <span class="mi">4</span> <span class="p">[</span><span class="n">mavproxy_options</span><span class="p">]</span>
</pre></div>
</div>
<p>Note that the correct parameters for the vehicles in the simulator are
required to be loaded. This can be done via the -w option above. The parameters are in the Rover.parm,
Arducopter.parm, ArduPlane.parm for the relevant vehicles.</p>
</div>
<div class="section" id="linux-hil">
<h2>Linux - HIL<a class="headerlink" href="#linux-hil" title="Permalink to this headline">¶</a></h2>
<p>Download the <a class="reference external" href="https://github.com/ardupilot/ardupilot">APM source
code</a> and the
<a class="reference external" href="https://github.com/tridge/jsbsim">jsbsim</a> simulator. Depending on
your system setup, other packages may be required.</p>
<p>Refer to the SITL guide <a class="reference external" href="http://ardupilot.org/dev/docs/setting-up-sitl-on-linux.html">APM
Wiki</a> for setting up the JSBSim simulator.</p>
<p>The options for HIL mode are the same as for SITL. Note that the -w and -G commands are not applicable to HIL</p>
<p>HIL mode can be enabled on any APM firmware by setting the HIL_MODE parameter to 1. However, the simulator only supports Arduplane at this time. When the APM is rebooted, it will go into HIL mode and get all sensor data from the simulator. Set HIL_MODE to 0 to disable HIL mode upon the next reboot.</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">./</span><span class="n">Ardupilot</span><span class="o">/</span><span class="n">Tools</span><span class="o">/</span><span class="n">autotest</span>
<span class="n">sim_vehicle</span><span class="o">.</span><span class="n">sh</span> <span class="o">-</span><span class="n">v</span> <span class="n">Arduplane</span> <span class="o">-</span><span class="n">H</span> <span class="o">--</span><span class="nb">map</span> <span class="o">--</span><span class="n">console</span>

<span class="n">Changing</span> <span class="n">the</span> <span class="n">APM</span> <span class="n">to</span> <span class="n">HIL</span> <span class="n">mode</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">MAVProxy</span> <span class="n">console</span> <span class="k">if</span> <span class="n">required</span><span class="p">:</span>
</pre></div>
</div>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">param</span> <span class="nb">set</span> <span class="n">HIL_MODE</span> <span class="mi">1</span>
<span class="n">reboot</span>
</pre></div>
</div>
</div>
<div class="section" id="caveats">
<h2>Caveats<a class="headerlink" href="#caveats" title="Permalink to this headline">¶</a></h2>
<p>The are several important notes in regards to using the simulator:</p>
<ul class="simple">
<li>The simulator will (by default) start at a small model aircraft field
in Canberra, Australia. Any waypoints should be located relative to
this.</li>
<li>The multicopter and rover simulators are fairly basic and should not
be relied on for accurate simulations.</li>
<li>Due to limitations in JSBsim&#8217;s ground handling model, the aircraft
may sometimes flip over whilst sitting on the runway.</li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mavexp.html" class="btn btn-neutral float-right" title="MAVExplorer" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="mavtools.html" class="btn btn-neutral" title="Offline Tools" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>Except where otherwise noted, this documentation is licensed under <a href="https://creativecommons.org/licenses/by-sa/3.0/">CC Attribution-Share Alike 3.0 Unported</a>.</p>
<div style="float:right;"><a href="https://github.com/ArduPilot/MAVProxy/issues/new?title=Simulation%20-%20&body=URL:%20../analysis_and_simulation/simulation%0ATitle:%20Simulation%0A%0APlease%20update%20this%20description%20and%20the%20issue%20title">Page bug</a></div>     
    <p><a href="https://www.ardupilot.org/"><img src="../_static/images/ArduPilot-Logo.jpg" width="130" alt="ArduPilot" class /></a><br/> 
    This is an ArduPilot project.</p>     

    <p>

    </p>
  </div>

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.5.7',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>